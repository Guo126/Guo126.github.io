webpackJsonp([5],{"0RMV":function(t,e){},"3cXf":function(t,e,i){t.exports={default:i("L+o2"),__esModule:!0}},J3Pm:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("3cXf"),o=i.n(n),a={inject:["reload"],data:function(){return{title:"幸运记事",selectedKeys:[],show:!1,visible:!1,expandedKeys:[],searchValue:"",autoExpandParent:!0,gData:[],memory:[],editContent:"",editTitle:"",index:-1,deleteDialog:!1}},mounted:function(){localStorage.getItem("memory")||localStorage.setItem("memory",o()(this.memory)),localStorage.getItem("gData")||localStorage.setItem("gData",o()(this.gData)),this.memory=JSON.parse(localStorage.getItem("memory")),this.gData=JSON.parse(localStorage.getItem("gData")),this.setHeight(),this.visible||(this.visible=!0),this.expandedKeys.push((new Date).toLocaleDateString())},methods:{goBack:function(){var t=this;this.visible=!1,setTimeout(function(){t.$router.push("/")},800)},newText:function(){this.visible=!1,this.reload()},showMemory:function(t,e){this.matchMemory(t[0]),this.index>-1?(this.editTitle=this.memory[this.index].title,this.editContent=this.memory[this.index].content):(this.editTitle=" ",this.editContent=" ")},matchMemory:function(t){var e=this;this.memory.forEach(function(i,n){i.key==t&&(e.index=n)})},deleteItem:function(){var t=this,e=this.$createElement;if(this.index>-1)for(var i=0;i<this.gData.length;i++)for(var n=0;n<this.gData[i].children.length;n++)if(this.gData[i].children[n].key==this.memory[this.index].key)return this.memory.splice(this.index,1),this.gData[i].children.splice(n,1),this.editTitle=" ",this.editContent=" ",localStorage.setItem("gData",o()(this.gData)),localStorage.setItem("memory",o()(this.memory)),this.deleteDialog=!1,void this.$notification.open({icon:e("a-icon",{attrs:{type:"smile"},style:"color: #00FF00"}),message:"通知",description:"删除成功!",duration:2.5,onClick:function(){t.$notification.open({icon:e("a-icon",{attrs:{type:"frown"},style:"color: #FF0000"}),duration:2.5,message:"警告",description:"不要再点啦!",onClick:function(){}})}})},save:function(){var t=this,e=this.$createElement;if(""!=this.editTitle){var i=new Date,n=i.toLocaleDateString(),a=i.toLocaleTimeString(),s=!1,r=-1,l={key:n,title:n,children:[]},c={key:this.editTitle+a,title:this.editTitle+"  "+a},d=!1;this.index>-1&&this.gData.forEach(function(i,n){i.children.forEach(function(i,s){if(i.key==t.memory[t.index].key)return t.memory[t.index].title=t.editTitle,t.gData[n].children[s].title=t.editTitle+"  "+a,t.memory[t.index].content=t.editContent,d=!0,t.$notification.open({icon:e("a-icon",{attrs:{type:"smile"},style:"color: #00FF00"}),message:"通知",description:"保存成功!",duration:2.5,onClick:function(){t.$notification.open({icon:e("a-icon",{attrs:{type:"frown"},style:"color: #FF0000"}),duration:2.5,message:"警告",description:"不要再点啦!",onClick:function(){}})}}),localStorage.setItem("gData",o()(t.gData)),void localStorage.setItem("memory",o()(t.memory))})}),d||(this.gData.forEach(function(t,e){t.key==n&&(s=!0,r=e)}),s?this.gData[r].children.push(c):(l.children.push(c),this.gData.push(l)),this.memory.push({key:this.editTitle+a,title:this.editTitle,content:this.editContent}),this.expandedKeys.push(n),this.$notification.open({icon:e("a-icon",{attrs:{type:"smile"},style:"color: #00FF00"}),message:"通知",description:"保存成功!",duration:2.5,onClick:function(){t.$notification.open({icon:e("a-icon",{attrs:{type:"frown"},style:"color: #FF0000"}),duration:2.5,message:"警告",description:"不要再点啦!",onClick:function(){}})}}),localStorage.setItem("gData",o()(this.gData)),localStorage.setItem("memory",o()(this.memory)))}else this.$notification.open({icon:e("a-icon",{attrs:{type:"frown"},style:"color: #FF0000"}),duration:2.5,message:"警告",description:"标题不得为空!",onClick:function(){t.$notification.open({icon:e("a-icon",{attrs:{type:"frown"},style:"color: #FF0000"}),duration:2.5,message:"警告",description:"不要再点啦!",onClick:function(){}})}})},setHeight:function(){this.$refs.main.style.height=document.documentElement.clientHeight+"px"},showDrawer:function(){this.visible=!this.visible},onClose:function(){this.visible=!1},onExpand:function(t){this.expandedKeys=t,this.autoExpandParent=!1}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{ref:"main",staticClass:"bg"},[i("a-drawer",{attrs:{"v-if":t.visible,title:t.title,placement:"left",visible:t.visible,mask:!1,width:"20%"},on:{close:t.onClose}},[i("div",[i("a-tree",{attrs:{expandedKeys:t.expandedKeys,autoExpandParent:t.autoExpandParent,treeData:t.gData},on:{expand:t.onExpand,select:t.showMemory},scopedSlots:t._u([{key:"title",fn:function(e){var n=e.title;return[n.indexOf(t.searchValue)>-1?i("span",[t._v("\n              "+t._s(n.substr(0,n.indexOf(t.searchValue)))+"\n              "),i("span",{staticStyle:{color:"#f50"}},[t._v(t._s(t.searchValue))]),t._v("\n              "+t._s(n.substr(n.indexOf(t.searchValue)+t.searchValue.length))+"\n            ")]):i("span",[t._v(t._s(n))])]}}])})],1)]),t._v(" "),i("section",{staticClass:"flex-row"},[i("div",{staticStyle:{width:"20%"}}),t._v(" "),i("div",{staticClass:"edit-area flex-col"},[i("div",{staticClass:"flex-row",staticStyle:{padding:"0 0.5rem 1rem 0.5rem"}},[i("div",[i("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.showDrawer}},[t._v("目录")]),t._v(" "),i("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.goBack}},[t._v("BACK")])],1),t._v(" "),i("div",{staticStyle:{"margin-left":"auto"}},[i("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.save}},[t._v("保存")]),t._v(" "),i("a-button",{attrs:{type:"danger",ghost:""},on:{click:function(e){t.deleteDialog=!0}}},[t._v("删除")]),t._v(" "),i("a-button",{attrs:{type:"primary",icon:"plus",ghost:""},on:{click:t.newText}},[t._v("新增")])],1)]),t._v(" "),i("a-modal",{attrs:{title:"注意!",okText:"删除",width:"20rem",okType:"danger",cancelText:"取消"},on:{ok:t.deleteItem},model:{value:t.deleteDialog,callback:function(e){t.deleteDialog=e},expression:"deleteDialog"}},[i("p",[t._v("确认要删除吗？")])]),t._v(" "),i("a-input",{attrs:{size:"large",placeholder:"请输入标题"},model:{value:t.editTitle,callback:function(e){t.editTitle=e},expression:"editTitle"}}),t._v(" "),i("div",{staticStyle:{margin:"1rem 0"}}),t._v(" "),i("a-textarea",{attrs:{placeholder:"写下诗和远方...",rows:23},model:{value:t.editContent,callback:function(e){t.editContent=e},expression:"editContent"}})],1)])],1)},staticRenderFns:[]};var r=i("C7Lr")(a,s,!1,function(t){i("0RMV")},"data-v-8502cf0a",null);e.default=r.exports},"L+o2":function(t,e,i){var n=i("ZuHZ"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}}});
//# sourceMappingURL=5.dd2971c7317e98e6a400.js.map